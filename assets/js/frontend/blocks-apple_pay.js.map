{"version":3,"file":"frontend/blocks-apple_pay.js","mappings":"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","sources":["webpack://paysafe-checkout/external window [\"wc\",\"wcBlocksRegistry\"]","webpack://paysafe-checkout/external window [\"wc\",\"wcSettings\"]","webpack://paysafe-checkout/external window [\"wp\",\"element\"]","webpack://paysafe-checkout/external window [\"wp\",\"htmlEntities\"]","webpack://paysafe-checkout/external window [\"wp\",\"i18n\"]","webpack://paysafe-checkout/external window \"React\"","webpack://paysafe-checkout/webpack/bootstrap","webpack://paysafe-checkout/webpack/runtime/compat get default export","webpack://paysafe-checkout/webpack/runtime/define property getters","webpack://paysafe-checkout/webpack/runtime/hasOwnProperty shorthand","webpack://paysafe-checkout/webpack/runtime/make namespace object","webpack://paysafe-checkout/./resources/js/frontend/apple_pay.js"],"sourcesContent":["module.exports = window[\"wc\"][\"wcBlocksRegistry\"];","module.exports = window[\"wc\"][\"wcSettings\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"htmlEntities\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"React\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { sprintf, __ } from '@wordpress/i18n';\r\nimport { registerPaymentMethod, registerExpressPaymentMethod } from '@woocommerce/blocks-registry';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\nimport { getSetting } from '@woocommerce/settings';\r\nimport { useEffect } from '@wordpress/element'\r\n\r\nconst paymentMethodId = \"apple_pay\";\r\n\r\nconst defaultLabel = 'Paysafe Checkout';\r\n\r\nconst settings = getSetting( 'apple_pay_data', {} );\r\nconst settingsGooglePay = getSetting( 'google_pay_data', {} );\r\n\r\nlet is_apple_pay_google_pay_combo_activated = false;\r\nif (!!settings.is_apple_pay_express_enabled && !!settings.is_google_pay_express_enabled) {\r\n    is_apple_pay_google_pay_combo_activated = true;\r\n}\r\n\r\nconst log_paysafe_error = function(message, context) {\r\n    if (settings.log_errors === true && settings.log_error_endpoint) {\r\n        fetch(\r\n            settings.log_error_endpoint,\r\n            {\r\n                method: 'POST',\r\n                credentials: 'same-origin',\r\n                headers: new Headers({\r\n                    'Content-Type': 'application/json',\r\n                }),\r\n                body: JSON.stringify({\r\n                    message: message,\r\n                    context: context,\r\n                }),\r\n            })\r\n            .catch((error) => {});\r\n    }\r\n}\r\n\r\nconst is_hosted_integration = settings.integration_type === 'paysafe_js';\r\n\r\nconst label = decodeEntities( settings.title ) || defaultLabel;\r\n\r\nconst Label = () => {\r\n    return (\r\n        <div className={'paysafe-gateway-title'}>\r\n            <span>{ label }</span>\r\n            <img\r\n                className={'paysafe-gateway-image'}\r\n                src={ settings.icon }\r\n                alt={ label }\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nlet paymentAmount = 0;\r\nlet currentCartData = {};\r\nlet next_page = null;\r\n\r\nconst show_checkout_error = function(error_message) {\r\n    let woo_errors = document.getElementsByClassName('woocommerce-error');\r\n    woo_errors = woo_errors.length > 0 ? woo_errors[0] : null;\r\n\r\n    if (!woo_errors) {\r\n        let notice_wrappers = document.getElementsByClassName('woocommerce-notices-wrapper');\r\n        let notice_wrapper = notice_wrappers.length > 0 ? notice_wrappers[0] : null;\r\n        if (notice_wrapper) {\r\n            woo_errors = document.createElement('ul');\r\n            woo_errors.className = 'woocommerce-error';\r\n\r\n            notice_wrapper.appendChild(woo_errors);\r\n        }\r\n    }\r\n\r\n    if (woo_errors) {\r\n        let error_li = document.getElementById('paysafe-fatal-error-message');\r\n        if (!error_li) {\r\n            error_li = document.createElement('li');\r\n            error_li.setAttribute('id', 'paysafe-fatal-error-message');\r\n            error_li.innerHTML = error_message;\r\n            woo_errors.appendChild(error_li);\r\n\r\n            window.scrollTo({\r\n                top: 0,\r\n                left: 0,\r\n                behavior: \"smooth\",\r\n            });\r\n        } else {\r\n            error_li.innerHTML = error_message;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nlet hostedApplePayInstance = null;\r\nlet is_express_apple_pay_initialized = false;\r\nconst init_apple_pay_hosted_integration = function(onClick, onClose, onError) {\r\n    // if the page doesn't have the form, don't load it\r\n    if (!jQuery('#paysafe-hosted-apple-pay-payment-form').length) {\r\n        return;\r\n    }\r\n\r\n    if (is_express_apple_pay_initialized) {\r\n        return;\r\n    }\r\n\r\n    if (typeof(paysafe) === \"undefined\" || typeof(paysafe.fields) === \"undefined\") {\r\n        setTimeout(function() {\r\n            init_apple_pay_hosted_integration(onClick, onClose, onError);\r\n        }, 1000);\r\n        return;\r\n    }\r\n\r\n    is_express_apple_pay_initialized = true;\r\n    const paysafeOptions = {\r\n        // You must provide currencyCode to the Paysafe JS SDK to enable the Payment API integration\r\n        currencyCode: settings.currency_code,\r\n\r\n        // select the Paysafe test / sandbox environment\r\n        environment: settings.test_mode ? 'TEST' : 'LIVE',\r\n\r\n        transactionSource: 'WooCommerceJs',\r\n\r\n        accounts: {\r\n            default: settings.account_id,\r\n            applePay: settings.account_id,\r\n        },\r\n\r\n        fields: {\r\n            applePay: {\r\n                selector: '#paysafe-apple-pay',\r\n                type: 'buy',\r\n                label: __('Pay with Apple Pay', 'paysafe-checkout'),\r\n                color: 'black',\r\n\r\n                buttonWidth: '240px',\r\n                buttonHeight: '55px',\r\n            },\r\n        },\r\n    };\r\n\r\n    if (is_apple_pay_google_pay_combo_activated) {\r\n        paysafeOptions.accounts.googlePay = settingsGooglePay.account_id;\r\n\r\n        paysafeOptions.fields.googlePay = {\r\n            selector: '#paysafe-google-pay',\r\n            type: 'buy',\r\n            color: 'black',\r\n            label: __('Google Pay', 'paysafe-checkout'),\r\n            merchantId: settingsGooglePay.express_merchant_ref_num,\r\n            country: settingsGooglePay.google_pay_issuer_country,\r\n\r\n            buttonWidth: '240px',\r\n            buttonHeight: '55px',\r\n        };\r\n    }\r\n\r\n    paymentAmount = parseInt(currentCartData.cartTotals.total_price);\r\n    let billing_street = currentCartData.billingAddress.address_1;\r\n    let billing_street2 = currentCartData.billingAddress.address_2;\r\n    let billing_city = currentCartData.billingAddress.city;\r\n    let billing_zip = currentCartData.billingAddress.postcode;\r\n    let billing_state = currentCartData.billingAddress.state;\r\n    let billing_country = currentCartData.billingAddress.country;\r\n\r\n    // initialize the hosted iframes using the SDK setup function\r\n    paysafe.fields\r\n        .setup(\r\n            settings.authorization,\r\n            paysafeOptions\r\n        )\r\n        .then(instance => {\r\n            hostedApplePayInstance = instance;\r\n            return instance.show();\r\n        })\r\n        .then(paymentMethods => {\r\n            if (paymentMethods.applePay && !paymentMethods.applePay.error) {\r\n                document.getElementById('paysafe-apple-pay').addEventListener(\r\n                    'click',\r\n                    function (event) {\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n\r\n                        // disable the express checkout block,\r\n                        // payment process started\r\n                        paymentAmount = parseInt(currentCartData.cartTotals.total_price);\r\n                        if (!paymentAmount) {\r\n                            log_paysafe_error(\"ERROR: Express checkout order amount is not set\", []);\r\n                            onError(__(\"ERROR: Express checkout order amount is not set\", \"paysafe-checkout\"));\r\n                            return;\r\n                        }\r\n\r\n                        const currency_code = currentCartData.cartTotals.currency_code;\r\n                        const merchant_ref_num = settings.express_merchant_ref_num || 'apple_pay_' + Date.now();\r\n                        const hostedTokenizationOptions = {\r\n                            transactionSource: 'WooCommerceJs',\r\n                            amount: paymentAmount,\r\n                            transactionType: 'PAYMENT',\r\n                            currency: currency_code,\r\n                            merchantRefNum: merchant_ref_num,\r\n                            environment: settings.test_mode ? 'TEST' : 'LIVE',\r\n                            paymentType: 'APPLEPAY',\r\n                            applePay: {\r\n                                country: billing_country,\r\n                            },\r\n                            accountId: settings.account_id,\r\n                            customerDetails: {\r\n                                billingDetails: {\r\n                                    country: billing_country,\r\n                                    zip: billing_zip,\r\n                                    street: billing_street,\r\n                                    city: billing_city,\r\n                                    state: billing_state,\r\n                                },\r\n                            },\r\n                        };\r\n\r\n                        hostedApplePayInstance\r\n                            .tokenize(hostedTokenizationOptions)\r\n                            .then(result => {\r\n                                const paymentToken = result.token || null;\r\n                                if (!paymentToken) {\r\n                                    // todo align this text to standards\r\n                                    const error_message = __(\"ERROR: Express checkout couldn't tokenize the payment information\", \"paysafe-checkout\");\r\n\r\n                                    log_paysafe_error(error_message, []);\r\n                                    onError(error_message);\r\n                                    return;\r\n                                }\r\n\r\n                                // create the order\r\n                                fetch(\r\n                                    settings.express_checkout_endpoint,\r\n                                    {\r\n                                        method: 'POST',\r\n                                        credentials: 'same-origin',\r\n                                        headers: new Headers({\r\n                                            'Content-Type': 'application/json',\r\n                                        }),\r\n                                        body: JSON.stringify({\r\n                                            'gateway_id': paymentMethodId,\r\n                                            nonce: settings.nonce,\r\n                                        }),\r\n                                    })\r\n                                    .then(result => {\r\n                                        return result.json();\r\n                                    })\r\n                                    .then(json => {\r\n                                        if (json.status === 'success') {\r\n                                            const orderId = json.order_id || null;\r\n                                            if (!orderId) {\r\n                                                log_paysafe_error(\"ERROR: Express checkout couldn't create Order\", []);\r\n                                                onError(__(\"ERROR: Express checkout couldn't create the order\", \"paysafe-checkout\"));\r\n                                                return;\r\n                                            }\r\n\r\n                                            // send the token to the BE to process the payment\r\n                                            // add AJAX code to send token to your merchant server\r\n                                            const paymentData = {\r\n                                                orderId: orderId,\r\n                                                paymentMethod: 'APPLEPAY',\r\n                                                transactionType: 'PAYMENT',\r\n                                                paymentHandleToken: paymentToken,\r\n                                                amount: paymentAmount,\r\n                                                customerOperation: '',\r\n                                                merchantRefNum: merchant_ref_num,\r\n                                                nonce: settings.nonce,\r\n                                            };\r\n\r\n                                            fetch(\r\n                                                settings.register_url,\r\n                                                {\r\n                                                    method: 'POST',\r\n                                                    credentials: 'same-origin',\r\n                                                    headers: new Headers({\r\n                                                        'Content-Type': 'application/json',\r\n                                                    }),\r\n                                                    body: JSON.stringify(paymentData),\r\n                                                })\r\n                                                .then(result => {\r\n                                                    return result.json();\r\n                                                })\r\n                                                .then(json => {\r\n                                                    if (json.status === 'success') {\r\n                                                        // close the Apple Pay window\r\n                                                        hostedApplePayInstance.complete('success');\r\n                                                    } else {\r\n                                                        onError(\"ERROR: Express checkout payment failed\" + (json.message ? \" (\" + json.message + \")\" : \"\"));\r\n\r\n                                                        hostedApplePayInstance.complete('fail');\r\n                                                    }\r\n\r\n                                                    window.location = json.redirect_url;\r\n                                                })\r\n                                                .catch((error) => {\r\n                                                    // the BE call failed\r\n                                                    const error_message = 'ERROR ' + error.code + ': ' + error.detailedMessage;\r\n\r\n                                                    log_paysafe_error(error_message, []);\r\n                                                    onError(error_message);\r\n\r\n                                                    hostedApplePayInstance.complete('fail');\r\n                                                });\r\n                                        } else {\r\n                                            onError(__(\"ERROR: Express checkout couldn't create the order\", \"paysafe-checkout\"));\r\n                                        }\r\n                                    })\r\n                                    .catch((error) => {\r\n                                        // the BE call failed\r\n                                        const error_message = 'ERROR ' + error.code + ': ' + error.detailedMessage;\r\n\r\n                                        log_paysafe_error(error_message, []);\r\n                                        onError(error_message);\r\n\r\n                                        hostedApplePayInstance.complete('fail');\r\n                                    });\r\n                            })\r\n                            .catch(error => {\r\n                                // display the tokenization error in dialog window\r\n                                let error_message = ('ERROR ' + error.code + (error.detailedMessage ? ': ' + error.detailedMessage : \"\"));\r\n                                if (error.displayMessage) {\r\n                                    error_message = error.displayMessage + (error.detailedMessage ? ': ' + error.detailedMessage : \"\");\r\n                                }\r\n\r\n                                log_paysafe_error(error_message, []);\r\n\r\n                                if (error.detailedMessage && error.detailedMessage.includes('User aborted payment')) {\r\n                                    onError(error.detailedMessage);\r\n                                } else {\r\n                                    onError(error_message);\r\n                                }\r\n                            });\r\n\r\n                    },\r\n                    false,\r\n                );\r\n            }\r\n\r\n            if (is_apple_pay_google_pay_combo_activated && paymentMethods.googlePay && !paymentMethods.googlePay.error) {\r\n                document.getElementById('paysafe-google-pay').addEventListener(\r\n                    // document.getElementById('gpay-button-online-api-id').addEventListener(\r\n                    'click',\r\n                    function (event) {\r\n\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n\r\n                        // disable the express checkout block,\r\n                        // payment process started\r\n                        onClick();\r\n\r\n                        fetch(\r\n                            settingsGooglePay.express_checkout_endpoint,\r\n                            {\r\n                                method: 'POST',\r\n                                credentials: 'same-origin',\r\n                                headers: new Headers({\r\n                                    'Content-Type': 'application/json',\r\n                                }),\r\n                                body: JSON.stringify({\r\n                                    'gateway_id': 'google_pay',\r\n                                    nonce: settingsGooglePay.nonce,\r\n                                }),\r\n                            })\r\n                            .then(result => {\r\n                                return result.json();\r\n                            })\r\n                            .then(json => {\r\n                                if (json.status === 'success') {\r\n                                    paymentAmount = parseInt(currentCartData.cartTotals.total_price);\r\n                                    if (!paymentAmount) {\r\n                                        log_paysafe_error(\"ERROR: Express checkout order amount is not set\", []);\r\n                                        onError(__(\"ERROR: Express checkout order amount is not set\", \"paysafe-checkout\"));\r\n                                        return;\r\n                                    }\r\n\r\n                                    const order_id = json.order_id || null;\r\n                                    if (!order_id) {\r\n                                        log_paysafe_error(\"ERROR: Express checkout couldn't create Order\", []);\r\n                                        onError(__(\"ERROR: Express checkout couldn't create the order\", \"paysafe-checkout\"));\r\n                                        return;\r\n                                    }\r\n\r\n                                    const currency_code = currentCartData.cartTotals.currency_code;\r\n                                    const merchant_ref_num = json.merchant_ref_num || 'google_pay_' + Date.now();\r\n                                    const hostedTokenizationOptions = {\r\n                                        transactionSource: 'WooCommerceJs',\r\n                                        amount: paymentAmount,\r\n                                        transactionType: 'PAYMENT',\r\n                                        currency: currency_code,\r\n                                        merchantRefNum: merchant_ref_num,\r\n                                        environment: settingsGooglePay.test_mode ? 'TEST' : 'LIVE',\r\n                                        paymentType: 'GOOGLEPAY',\r\n                                        googlePay: {\r\n                                            country: settingsGooglePay.google_pay_issuer_country,\r\n                                            requiredBillingContactFields: ['email'],\r\n                                            requiredShippingContactFields: ['name'],\r\n                                        },\r\n                                        accountId: settingsGooglePay.account_id,\r\n                                        customerDetails: {\r\n                                            billingDetails: {\r\n                                                country: billing_country,\r\n                                                zip: billing_zip,\r\n                                                street: billing_street,\r\n                                                city: billing_city,\r\n                                                state: billing_state,\r\n                                            },\r\n                                        },\r\n                                        threeDs: {\r\n                                            merchantUrl: settingsGooglePay.checkout_url,\r\n                                            deviceChannel: \"BROWSER\",\r\n                                            messageCategory: \"PAYMENT\",\r\n                                            authenticationPurpose: \"PAYMENT_TRANSACTION\",\r\n                                            transactionIntent: \"GOODS_OR_SERVICE_PURCHASE\",\r\n                                        },\r\n                                    };\r\n\r\n\r\n                                    hostedApplePayInstance\r\n                                        .tokenize(hostedTokenizationOptions)\r\n                                        .then(result => {\r\n                                            // write the Payment token value to the browser console\r\n\r\n                                            const paymentData = {\r\n                                                orderId: order_id,\r\n                                                paymentMethod: 'GOOGLEPAY',\r\n                                                transactionType: 'PAYMENT',\r\n                                                paymentHandleToken: result.token,\r\n                                                amount: paymentAmount,\r\n                                                customerOperation: '',\r\n                                                merchantRefNum: merchant_ref_num,\r\n                                                nonce: settingsGooglePay.nonce,\r\n                                            };\r\n\r\n\r\n                                            fetch(\r\n                                                settingsGooglePay.register_url,\r\n                                                {\r\n                                                    method: 'POST',\r\n                                                    credentials: 'same-origin',\r\n                                                    headers: new Headers({\r\n                                                        'Content-Type': 'application/json',\r\n                                                    }),\r\n                                                    body: JSON.stringify(paymentData),\r\n                                                })\r\n                                                .then(result => {\r\n                                                    return result.json();\r\n                                                })\r\n                                                .then(json => {\r\n                                                    if (json.status === 'success') {\r\n                                                        // close the Google Pay window\r\n                                                        hostedApplePayInstance.complete('success');\r\n                                                    } else {\r\n                                                        onError(\"ERROR: Express checkout payment failed\" + (json.message ? \" (\" + json.message + \")\" : \"\"));\r\n\r\n                                                        hostedApplePayInstance.complete('fail');\r\n                                                    }\r\n\r\n                                                    window.location = json.redirect_url;\r\n                                                })\r\n                                                .catch((error) => {\r\n                                                    // the BE call failed\r\n                                                    const error_message = 'ERROR ' + error.code + ': ' + error.detailedMessage;\r\n\r\n                                                    log_paysafe_error(error_message, []);\r\n                                                    onError(error_message);\r\n\r\n                                                    hostedApplePayInstance.complete('fail');\r\n                                                });\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // display the tokenization error in dialog window\r\n                                            let error_message = ('ERROR ' + error.code + (error.detailedMessage ? ': ' + error.detailedMessage : \"\"));\r\n                                            if (error.displayMessage) {\r\n                                                error_message = error.displayMessage + (error.detailedMessage ? ': ' + error.detailedMessage : \"\");\r\n                                            }\r\n\r\n                                            log_paysafe_error(error_message, []);\r\n                                            if (error.detailedMessage && error.detailedMessage.includes('User aborted payment')) {\r\n                                                onError(error.detailedMessage);\r\n                                            } else {\r\n                                                onError(error_message);\r\n                                            }\r\n                                        });\r\n                                } else {\r\n                                    onError(__(\"ERROR: Express checkout couldn't create the order\", \"paysafe-checkout\"));\r\n                                }\r\n                            });\r\n\r\n                    },\r\n                    false,\r\n                );\r\n            }\r\n        })\r\n        .catch(error => {\r\n            // this means that the initialization of the form failed,\r\n            // disable this payment method\r\n            const error_message = 'ERROR ' + error.code + ': ' + error.detailedMessage;\r\n\r\n            log_paysafe_error(error_message, []);\r\n            if (error.detailedMessage && error.detailedMessage.includes('User aborted payment')) {\r\n                onError(error.detailedMessage);\r\n            } else {\r\n                onError(error_message);\r\n            }\r\n        });\r\n}\r\n\r\nconst Content = ( props ) => {\r\n    const { eventRegistration, emitResponse } = props;\r\n    const { onCheckoutSuccess } = eventRegistration;\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = onCheckoutSuccess( (response) => {\r\n            const orderId = response.orderId;\r\n            const customerSingleUseToken = response && response.processingResponse && response.processingResponse.paymentDetails && response.processingResponse.paymentDetails.single_use_token ? response.processingResponse.paymentDetails.single_use_token : '';\r\n            const merch_ref_num = response && response.processingResponse && response.processingResponse.paymentDetails && response.processingResponse.paymentDetails.merch_ref_num ? response.processingResponse.paymentDetails.merch_ref_num : '';\r\n\r\n            let master_error = null;\r\n\r\n            paymentAmount = parseInt(currentCartData.cartTotals.total_price);\r\n\r\n            if (orderId && paymentAmount) {\r\n                let currency_code = currentCartData.cartTotals.currency_code;\r\n                let customer_first_name = currentCartData.billingAddress.first_name;\r\n                let customer_last_name = currentCartData.billingAddress.last_name;\r\n                let customer_email = currentCartData.billingAddress.email;\r\n\r\n                let billing_street = currentCartData.billingAddress.address_1;\r\n                let billing_street2 = currentCartData.billingAddress.address_2;\r\n                let billing_city = currentCartData.billingAddress.city;\r\n                let billing_zip = currentCartData.billingAddress.postcode;\r\n                let billing_state = currentCartData.billingAddress.state;\r\n                let billing_country = currentCartData.billingAddress.country;\r\n                let billing_phone = currentCartData.billingAddress.phone;\r\n\r\n                const checkout_options = {\r\n                    transactionSource: 'WooCommerceCheckout',\r\n                    amount: paymentAmount,\r\n                    transactionType: 'PAYMENT',\r\n                    currency: currency_code,\r\n                    merchantRefNum: merch_ref_num,\r\n                    environment: settings.test_mode ? 'TEST' : 'LIVE',\r\n                    displayPaymentMethods: [\r\n                        'applePay'\r\n                    ],\r\n                    paymentMethodDetails: {\r\n                        applePay: {\r\n                            accountId: settings.account_id,\r\n                            label: 'apple_pay',\r\n                        }\r\n                    },\r\n                    threeDs: {\r\n                        merchantUrl: settings.checkout_url,\r\n                        deviceChannel: \"BROWSER\",\r\n                        messageCategory: \"PAYMENT\",\r\n                        authenticationPurpose: \"PAYMENT_TRANSACTION\",\r\n                        transactionIntent: \"GOODS_OR_SERVICE_PURCHASE\",\r\n                    },\r\n                    locale: settings.locale,\r\n                };\r\n\r\n                if (settings.merchant_descriptor && settings.merchant_phone) {\r\n                    checkout_options.merchantDescriptor = {\r\n                        dynamicDescriptor: settings.merchant_descriptor,\r\n                        phone: settings.merchant_phone,\r\n                    }\r\n                }\r\n\r\n                checkout_options.singleUseCustomerToken = customerSingleUseToken;\r\n                checkout_options.customer = {\r\n                    firstName: customer_first_name,\r\n                    lastName: customer_last_name,\r\n                    email: customer_email,\r\n                };\r\n                checkout_options.billingAddress = {\r\n                    nickName: \"Home\",\r\n                    zip: billing_zip,\r\n                    country: billing_country,\r\n                };\r\n                if (billing_street) {\r\n                    checkout_options.billingAddress.street = billing_street;\r\n                }\r\n                if (billing_street2) {\r\n                    checkout_options.billingAddress.street2 = billing_street2;\r\n                }\r\n                if (billing_city) {\r\n                    checkout_options.billingAddress.city = billing_city;\r\n                }\r\n                if (billing_state) {\r\n                    checkout_options.billingAddress.state = billing_state;\r\n                }\r\n\r\n                paysafe.checkout.setup(\r\n                    settings.authorization,\r\n                    checkout_options,\r\n\r\n                    // resultCallback\r\n                    function (instance, error, result) {\r\n                        if (result && result.paymentHandleToken) {\r\n                            // Successfully Tokenized transaction, use result.paymentHandleToken to process a payment\r\n                            // add AJAX code to send token to your merchant server\r\n\r\n                            const paymentData = {\r\n                                orderId: orderId,\r\n                                paymentMethod: result.paymentMethod,\r\n                                transactionType: result.transactionType,\r\n                                paymentHandleToken: result.paymentHandleToken,\r\n                                amount: result.amount,\r\n                                customerOperation: result.customerOperation,\r\n                                merchantRefNum: checkout_options.merchantRefNum,\r\n                                nonce: settings.nonce,\r\n                            };\r\n\r\n                            fetch(\r\n                                settings.register_url,\r\n                                {\r\n                                    method: 'POST',\r\n                                    credentials: 'same-origin',\r\n                                    headers: new Headers({\r\n                                        'Content-Type': 'application/json',\r\n                                    }),\r\n                                    body: JSON.stringify(paymentData),\r\n                                })\r\n                                .then(result => {\r\n                                    return result.json();\r\n                                })\r\n                                .then(json => {\r\n                                    if (json.status === 'success') {\r\n                                        instance.showSuccessScreen(__(\"Your goods are now purchased. Expect them to be delivered in next 5 business days.\", \"paysafe-checkout\"));\r\n                                    } else {\r\n                                        log_paysafe_error(\"Payment failed. Popup was closed without a correct end message!\", error);\r\n                                        instance.showFailureScreen(__(\"The payment process failed. Please close this popup and try again\", \"paysafe-checkout\"));\r\n                                    }\r\n\r\n                                    next_page = json.redirect_url;\r\n                                })\r\n                                .catch((error) => {\r\n                                    // the BE call failed\r\n                                    log_paysafe_error(__(\"The payment process failed. Please close this popup and try again\", \"paysafe-checkout\"), error);\r\n                                    instance.showFailureScreen(__(\"The payment process failed. Please close this popup and try again\", \"paysafe-checkout\"));\r\n                                });\r\n                        } else {\r\n                            let errorMessage = '';\r\n                            if (error) {\r\n                                if (error.code) {\r\n                                    errorMessage += error.code + ' ';\r\n                                }\r\n                                if (error.message) {\r\n                                    errorMessage += error.message + ' ';\r\n                                }\r\n                                if (error.detailedMessage) {\r\n                                    errorMessage += error.detailedMessage;\r\n                                }\r\n                            }\r\n\r\n                            // Tokenization failed and Payment Handled moved to failed Status\r\n                            if (instance) {\r\n                                log_paysafe_error(__(\"Payment failed. Popup was closed without a correct end message!\", \"paysafe-checkout\") + ' ' + errorMessage, {'pace': 3});\r\n                                instance.showFailureScreen(__(\"The payment was declined. Please, try again with the same or another payment method.\" + ' ' + errorMessage, \"paysafe-checkout\"));\r\n                            } else {\r\n                                master_error = __('The payment was declined. Please, try again with the same or another payment method.', \"paysafe-checkout\");\r\n                                if (error && error.code && error.detailedMessage) {\r\n                                    master_error += \"<br />\" + ' ' + error.code + ' ' + error.detailedMessage;\r\n                                }\r\n\r\n                                log_paysafe_error(master_error, []);\r\n                                show_checkout_error(master_error);\r\n                            }\r\n                        }\r\n                    },\r\n\r\n                    // closeCallback\r\n                    function (stage, expired) {\r\n                        if (stage) {\r\n                            // Depeding upon the stage take different actions\r\n                            switch (stage) {\r\n                                case \"PAYMENT_HANDLE_NOT_CREATED\" :\r\n                                    // don't show any errors,\r\n                                    // as the customer choose to close the popup window\r\n                                    window.location.reload();\r\n                                    break;\r\n\r\n                                case \"PAYMENT_HANDLE_CREATED\" :\r\n                                case \"PAYMENT_HANDLE_REDIRECT\" :\r\n                                case \"PAYMENT_HANDLE_PAYABLE\" :\r\n                                    // in all these cases the user closed the popup after the payment\r\n                                    if (null !== next_page) {\r\n                                        window.location = next_page;\r\n                                        return;\r\n                                    }\r\n\r\n                                    // reload the cart page, something must have happened\r\n                                    window.location.reload();\r\n                                    break;\r\n\r\n                                default:\r\n                            }\r\n                        } else {\r\n                            // Add action in case Checkout is expired\r\n                            // the popup expired,\r\n                            // lets reload the page so that the customer\r\n                            // can try another payment option\r\n                            window.location.reload();\r\n                        }\r\n                    },\r\n\r\n                    // riskCallback\r\n                    function (instance, amount, paymentMethod) {\r\n                        if (amount === paymentAmount) {\r\n                            instance.accept();\r\n                        } else {\r\n                            log_paysafe_error(__(\"Amount is not the value expected\", \"paysafe-checkout\"), []);\r\n                            instance.decline(__(\"Amount is not the value expected\", \"paysafe-checkout\"));\r\n                        }\r\n                    }\r\n                );\r\n            } else {\r\n                log_paysafe_error(__(\"The payment process failed. Please close this popup and try again\", \"paysafe-checkout\"), []);\r\n                return {\r\n                    type: emitResponse.responseTypes.ERROR,\r\n                    message: __(\"The payment process failed. Please close this popup and try again\", \"paysafe-checkout\"),\r\n                }\r\n            }\r\n\r\n            return response;\r\n        });\r\n\r\n        return () => {\r\n            unsubscribe();\r\n        };\r\n    }, [\r\n        emitResponse.responseTypes.ERROR,\r\n        emitResponse.responseTypes.SUCCESS,\r\n        '',\r\n        [],\r\n        onCheckoutSuccess,\r\n    ]);\r\n\r\n    let descriptionForDisplay = [\r\n        <div>{ decodeEntities( settings.description || '' ) }</div>\r\n    ];\r\n\r\n    if( settings.test_mode ) {\r\n        descriptionForDisplay.push(<hr></hr>);\r\n        descriptionForDisplay.push(\r\n            <div style={{textAlign: \"justify\", marginTop: \"10px\"}}>\r\n                <span>{__('Paysafe Checkout is in TEST mode. Use the built-in simulator to test payments.', 'paysafe-checkout')}</span>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return descriptionForDisplay;\r\n};\r\n\r\n\r\nconst ExpressLabel = () => {\r\n    let express_label = (\r\n        <div className={'paysafe-gateway-title'}>\r\n            <span>{ label }</span>\r\n            <img\r\n                className={'paysafe-gateway-image'}\r\n                src={ settings.icon }\r\n                alt={ label }\r\n            />\r\n        </div>\r\n    );\r\n\r\n    if (is_apple_pay_google_pay_combo_activated) {\r\n        let comboLabel = __('Paysafe Express Payment', 'paysafe-checkout');\r\n        return (\r\n            <div className={'paysafe-gateway-title'}>\r\n                <span>{ comboLabel }</span>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return express_label;\r\n};\r\n\r\nconst ExpressContent = ( props ) => {\r\n    const { eventRegistration, onClick, onClose, onError } = props;\r\n    const { onCheckoutSuccess } = eventRegistration;\r\n\r\n    useEffect(() => {\r\n        init_apple_pay_hosted_integration(onClick, onClose, onError);\r\n\r\n        const unsubscribe = onCheckoutSuccess( (response) => {\r\n            return response;\r\n        });\r\n\r\n        return () => {\r\n            unsubscribe();\r\n        };\r\n    }, [\r\n        [],\r\n        {},\r\n        onCheckoutSuccess,\r\n    ]);\r\n\r\n    let descriptionForDisplay = [\r\n        <div>{ decodeEntities( settings.description || '' ) }</div>\r\n    ];\r\n    if (is_apple_pay_google_pay_combo_activated) {\r\n        descriptionForDisplay = [\r\n            <div>{ decodeEntities( __('Easy and secure payments with Paysafe', 'paysafe-checkout') ) }</div>\r\n        ];\r\n    }\r\n\r\n    if( settings.test_mode ) {\r\n        descriptionForDisplay.push(<hr></hr>);\r\n        descriptionForDisplay.push(\r\n            <div style={{textAlign: \"justify\", marginTop: \"10px\"}}>\r\n                <span>{__('Paysafe Checkout is in TEST mode. Use the built-in simulator to test payments.', 'paysafe-checkout')}</span>\r\n            </div>\r\n        );\r\n        descriptionForDisplay.push(<p></p>);\r\n    }\r\n\r\n    descriptionForDisplay.push(wp.element.RawHTML({ children: settings.integration_hosted_form }));\r\n\r\n    return descriptionForDisplay;\r\n};\r\n\r\nconst isApplePayAvailable = function() {\r\n    // First, check if ApplePaySession is available in the window object\r\n    if (window.ApplePaySession && ApplePaySession.canMakePayments) {\r\n        // This will return a Promise resolving to true/false\r\n        return ApplePaySession.canMakePayments();\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\n// if (isApplePayAvailable()) {\r\n    if (!is_hosted_integration) {\r\n        const PaysafeApplePayPayments = {\r\n            name: paymentMethodId,\r\n            paymentMethodId: paymentMethodId,\r\n            label: <Label />,\r\n            content: <Content />,\r\n            edit: <Content />,\r\n            canMakePayment: ( cartData => {\r\n                currentCartData = cartData;\r\n\r\n                return true;\r\n            }),\r\n            ariaLabel: label,\r\n            supports: {\r\n                features: settings.supports,\r\n            },\r\n        };\r\n        registerPaymentMethod(PaysafeApplePayPayments);\r\n    } else {\r\n        const PaysafeApplePayExpressPayment = {\r\n            name: paymentMethodId,\r\n            title: 'Apple Pay Express Checkout',\r\n            description: settings.description,\r\n            gatewayId: 'paysafe',\r\n            label: <ExpressLabel />,\r\n            content: <ExpressContent />,\r\n            edit: <ExpressContent />,\r\n            canMakePayment: ( cartData => {\r\n                currentCartData = cartData;\r\n\r\n                if (\r\n                    cartData.billingAddress &&\r\n                    cartData.billingAddress.email !== '' &&\r\n                    cartData.billingAddress.first_name !== '' &&\r\n                    cartData.billingAddress.last_name !== '' &&\r\n                    cartData.billingAddress.address_1 !== '' &&\r\n                    cartData.billingAddress.city !== '' &&\r\n                    cartData.billingAddress.postcode !== ''\r\n                ) {\r\n                    return true;\r\n                }\r\n\r\n                is_express_apple_pay_initialized = false;\r\n                return false;\r\n            }),\r\n            paymentMethodId: paymentMethodId,\r\n            supports: {\r\n                features: settings.supports,\r\n            },\r\n        };\r\n\r\n        registerExpressPaymentMethod(PaysafeApplePayExpressPayment);\r\n    }\r\n// }\r\n"],"names":["sprintf","__","registerPaymentMethod","registerExpressPaymentMethod","decodeEntities","getSetting","useEffect","paymentMethodId","defaultLabel","settings","settingsGooglePay","is_apple_pay_google_pay_combo_activated","is_apple_pay_express_enabled","is_google_pay_express_enabled","log_paysafe_error","message","context","log_errors","log_error_endpoint","fetch","method","credentials","headers","Headers","body","JSON","stringify","catch","error","is_hosted_integration","integration_type","label","title","Label","createElement","className","src","icon","alt","paymentAmount","currentCartData","next_page","show_checkout_error","error_message","woo_errors","document","getElementsByClassName","length","notice_wrappers","notice_wrapper","appendChild","error_li","getElementById","setAttribute","innerHTML","window","scrollTo","top","left","behavior","hostedApplePayInstance","is_express_apple_pay_initialized","init_apple_pay_hosted_integration","onClick","onClose","onError","jQuery","paysafe","fields","setTimeout","paysafeOptions","currencyCode","currency_code","environment","test_mode","transactionSource","accounts","default","account_id","applePay","selector","type","color","buttonWidth","buttonHeight","googlePay","merchantId","express_merchant_ref_num","country","google_pay_issuer_country","parseInt","cartTotals","total_price","billing_street","billingAddress","address_1","billing_street2","address_2","billing_city","city","billing_zip","postcode","billing_state","state","billing_country","setup","authorization","then","instance","show","paymentMethods","addEventListener","event","preventDefault","stopPropagation","merchant_ref_num","Date","now","hostedTokenizationOptions","amount","transactionType","currency","merchantRefNum","paymentType","accountId","customerDetails","billingDetails","zip","street","tokenize","result","paymentToken","token","express_checkout_endpoint","nonce","json","status","orderId","order_id","paymentData","paymentMethod","paymentHandleToken","customerOperation","register_url","complete","location","redirect_url","code","detailedMessage","displayMessage","includes","requiredBillingContactFields","requiredShippingContactFields","threeDs","merchantUrl","checkout_url","deviceChannel","messageCategory","authenticationPurpose","transactionIntent","Content","props","eventRegistration","emitResponse","onCheckoutSuccess","unsubscribe","response","customerSingleUseToken","processingResponse","paymentDetails","single_use_token","merch_ref_num","master_error","customer_first_name","first_name","customer_last_name","last_name","customer_email","email","billing_phone","phone","checkout_options","displayPaymentMethods","paymentMethodDetails","locale","merchant_descriptor","merchant_phone","merchantDescriptor","dynamicDescriptor","singleUseCustomerToken","customer","firstName","lastName","nickName","street2","checkout","showSuccessScreen","showFailureScreen","errorMessage","stage","expired","reload","accept","decline","responseTypes","ERROR","SUCCESS","descriptionForDisplay","description","push","style","textAlign","marginTop","ExpressLabel","express_label","comboLabel","ExpressContent","wp","element","RawHTML","children","integration_hosted_form","isApplePayAvailable","ApplePaySession","canMakePayments","PaysafeApplePayPayments","name","content","edit","canMakePayment","cartData","ariaLabel","supports","features","PaysafeApplePayExpressPayment","gatewayId"],"sourceRoot":""}